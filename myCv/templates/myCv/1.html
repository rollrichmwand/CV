{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{ profile.name }} - Online CV</title>
  <link rel="stylesheet" href="{% static 'myCv/style.css' %}" />
</head>
<body class="light-mode">

  <!-- ====== Header Section ====== -->
  <header class="hero">
    <button id="theme-toggle" title="Toggle dark/light mode">ðŸŒ™</button>
    <div class="container profile-header">
      {% if profile.photo %}
        <img src="{{ profile.photo.url }}" alt="{{ profile.name }}" class="profile-photo" />
      {% endif %}
      <div class="profile-info">
        <h1>{{ profile.name }}</h1>
        <p class="bio">{{ profile.bio }}</p>
        <div class="social-links">
          {% if profile.linkedin %}
            <a href="{{ profile.linkedin }}" target="_blank">LinkedIn</a>
          {% endif %}
        </div>
      </div>
    </div>
  </header>

  <main class="container">

    <!-- ====== Skills Section ====== -->
    <section id="skills" class="card">
      <h2>Skills</h2>
      <div class="skills-list">
        {% for skill in profile.skills.all %}
          <div class="skill-item">
            <div class="skill-header">
              <span class="skill-name">{{ skill.name }}</span>
              <span class="skill-percent">{{ skill.level }}%</span>
            </div>
            <div class="skill-bar">
              <div class="skill-progress" style="width: {{ skill.level }}%;"></div>
            </div>
          </div>
        {% empty %}
          <p>No skills added yet.</p>
        {% endfor %}
      </div>
    </section>

    <!-- ====== Work Experience ====== -->
    <section id="experience" class="card">
      <h2>Work Experience</h2>
      {% for job in profile.work_experiences.all %}
        <div class="experience-item">
          <h3>{{ job.title }} <span>â€” {{ job.company }}</span></h3>
          <p class="date">{{ job.start_year }} â€“ {{ job.end_year }}</p>
          <p>{{ job.description }}</p>
        </div>
      {% empty %}
        <p>No work experience listed.</p>
      {% endfor %}
    </section>

    <!-- ====== Education ====== -->
    <section id="academic" class="card">
      <h2>Education</h2>
      {% for edu in profile.educations.all %}
        <div class="academic-item">
          <h3>{{ academic.paper }} <span>â€” {{ academic.institution }}</span></h3>
          <p class="date">{{ academic.years }}</p>
          <p>{{ academic.descri }}</p>
        </div>
      {% empty %}
        <p>No education details yet.</p>
      {% endfor %}
    </section>

    <!-- ====== Projects ====== -->
    <section id="projects" class="card">
      <h2>Projects</h2>
      <div class="project-grid">
        {% for project in profile.projects.all %}
          <div class="project-card">
            {% if project.image %}
              <img src="{{ project.image.url }}" alt="{{ project.title }}">
            {% endif %}
            <h3>{{ project.title }}</h3>
            <p>{{ project.description }}</p>
            {% if project.link %}
              <a href="{{ project.link }}" class="project-link" target="_blank">View Project â†’</a>
            {% endif %}
          </div>
        {% empty %}
          <p>No projects available.</p>
        {% endfor %}
      </div>
    </section>

    <!-- ====== Hobbies Section ====== -->
    <section id="hobbies" class="card">
      <h2>Hobbies & Interests</h2>
      <ul class="hobby-list">
        {% for hobby in profile.hobbies.all %}
          <li>{{ hobby.name }}</li>
        {% empty %}
          <p>No hobbies listed yet.</p>
        {% endfor %}
      </ul>
    </section>

    <!-- ====== Referees Section ====== -->
    <section id="referees" class="card">
      <h2>Referees</h2>
      {% for ref in profile.referees.all %}
        <div class="referee-item">
          <h3>{{ ref.name }}</h3>
          <p>{{ ref.position }}</p>
          <p>Email: <a href="mailto:{{ ref.email }}">{{ ref.email }}</a></p>
        </div>
      {% empty %}
        <p>No referees added yet.</p>
      {% endfor %}
    </section>

    <!-- ====== Contact Form ====== -->
    <section id="contact" class="card">
      <h2>Contact Me</h2>
      <form method="POST" class="contact-form">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Send Message</button>
      </form>
    </section>
  </main>

  <!-- ====== Footer ====== -->
  <footer>
    <p>Â© {{ profile.name }} | Built with Django</p>
  </footer>

  <script src="{% static 'myCv/script.js' %}"></script>
</body>
</html>
